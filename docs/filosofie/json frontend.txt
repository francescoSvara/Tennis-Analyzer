{
  "schemaVersion": "match-bundle.v1",
  "generatedAt": "2025-12-23T14:05:12.123Z",
  "matchId": "sofascore:12345678",
  "source": {
    "provider": "sofascore",
    "eventId": 12345678,
    "isLive": true,
    "lastIngestAt": "2025-12-23T14:05:10.800Z"
  },

  "header": {
    "tournament": {
      "name": "ATP 500 Vienna",
      "surface": "HARD",
      "round": "QF"
    },
    "players": {
      "home": { "id": "p_001", "name": "Novak Djokovic" },
      "away": { "id": "p_002", "name": "Alexander Zverev" }
    },
    "favoritePlayerId": "p_001",
    "matchType": "ATP",
    "bestOf": 3,

    "score": {
      "sets": { "home": 1, "away": 0 },
      "games": { "home": 2, "away": 3 },
      "point": { "home": 0, "away": 40 },
      "isTiebreak": false,
      "tiebreakPoint": null,
      "servingSide": "away",
      "serverPlayerId": "p_002",
      "nextToServePlayerId": "p_001"
    },

    "market": {
      "matchOdds": {
        "home": { "back": 2.10, "lay": 2.12, "last": 2.10 },
        "away": { "back": 1.78, "lay": 1.80, "last": 1.78 }
      },
      "trend": {
        "windowSec": 300,
        "homeDelta": -0.06,
        "awayDelta": 0.04
      },
      "liquidity": {
        "level": "MED",
        "spreadPct": 1.1
      }
    },

    "quickSignals": {
      "volatility": { "value": 0.62, "label": "HIGH" },
      "elasticity": { "value": 0.48, "label": "MED" },
      "pressure": {
        "server": { "value": 0.83, "label": "HIGH", "playerId": "p_002" },
        "receiver": { "value": 0.41, "label": "MED", "playerId": "p_001" }
      },
      "matchCharacter": { "label": "COMEBACK_PRONE" }
    }
  },

  "tabs": {
    "overview": {
      "miniMomentum": {
        "lastNPoints": 10,
        "sequence": [
          { "winnerSide": "home", "isKey": false },
          { "winnerSide": "away", "isKey": true }
        ]
      },
      "strategySummary": {
        "readyCount": 1,
        "watchCount": 1,
        "offCount": 1,
        "topReadyStrategyId": "banca_servizio"
      }
    },

    "strategies": {
      "cooldownSec": 30,
      "antiFlap": { "enabled": true, "minStableTicks": 2 },
      "signals": [
        {
          "id": "banca_servizio",
          "name": "Banca Servizio",
          "status": "READY",
          "confidence": 0.78,
          "riskTag": "MED",
          "action": { "type": "LAY", "targetPlayerId": "p_002" },
          "entry": {
            "recommendedStake": 10,
            "liabilityCap": 30,
            "market": "matchOdds",
            "notes": "Entry su 0-40 / 15-40 / 0-30 quando holdDifficulty HIGH"
          },
          "exit": {
            "primary": "BREAK_OR_HOLD_END_OF_GAME",
            "guards": ["STOP_IF_SCORE_NORMALIZES", "STOP_IF_TIMEOUT"]
          },
          "conditions": [
            { "label": "HoldDifficulty HIGH (server)", "ok": true },
            { "label": "PointScore in {0-30,0-40,15-40}", "ok": true }
          ],
          "reasons": [
            "Servizio sotto pressione. Probabile break point imminente."
          ],
          "debug": {
            "scoreKey": "0-40",
            "servingPlayerId": "p_002",
            "holdDifficulty": "HIGH"
          }
        },

        {
          "id": "lay_the_winner",
          "name": "Lay the Winner",
          "status": "WATCH",
          "confidence": 0.61,
          "riskTag": "HIGH",
          "action": null,
          "entry": {
            "recommendedStake": 10,
            "liabilityCap": 40,
            "market": "matchOdds",
            "notes": "Entra quando READY (tipicamente su BP nel 2Â° set)"
          },
          "exit": {
            "primary": "AT_BREAKPOINT_OR_BREAK_OCCURRED",
            "guards": ["STOP_IF_ODDS_MOVED_TOO_FAST"]
          },
          "conditions": [
            { "label": "CurrentSet == 2", "ok": true },
            { "label": "WinnerFirstSet != Favorite", "ok": true },
            { "label": "Odds(winnerFirstSet) < 1.60", "ok": true }
          ],
          "reasons": [
            "Favorito sotto di un set. Quote non aggiornate al rischio."
          ],
          "debug": {
            "currentSet": 2,
            "winnerFirstSetPlayerId": "p_002",
            "favoritePlayerId": "p_001",
            "oddsWinnerFirstSet": 1.58
          }
        },

        {
          "id": "super_break",
          "name": "Super Break",
          "status": "OFF",
          "confidence": null,
          "riskTag": "MED",
          "action": null,
          "entry": { "recommendedStake": 10, "liabilityCap": 30, "market": "matchOdds", "notes": "" },
          "exit": { "primary": "TIEBREAK_OR_BREAK_UNDERDOG", "guards": [] },
          "conditions": [
            { "label": "matchType in {ATP,male}", "ok": true },
            { "label": "dominanceValue > 60", "ok": false },
            { "label": "dominantPlayer == servingPlayer", "ok": false },
            { "label": "nextToServe != dominantPlayer", "ok": true }
          ],
          "reasons": [
            "Non attiva: dominanceValue insufficiente."
          ],
          "debug": {
            "dominanceValue": 54,
            "dominantPlayerId": "p_001",
            "servingPlayerId": "p_002",
            "nextToServePlayerId": "p_001"
          }
        }
      ],
      "eventLog": [
        { "ts": "2025-12-23T14:05:09.000Z", "type": "SIGNAL_READY", "strategyId": "banca_servizio", "note": "0-40 con holdDifficulty HIGH" }
      ]
    },

    "odds": {
      "markets": [
        {
          "key": "matchOdds",
          "label": "Match Odds",
          "runners": {
            "home": { "back": 2.10, "lay": 2.12 },
            "away": { "back": 1.78, "lay": 1.80 }
          }
        }
      ],
      "impliedProbability": {
        "home": 0.476,
        "away": 0.562
      },
      "edge": {
        "home": { "modelProb": 0.49, "marketProb": 0.476, "edge": 0.014 },
        "away": { "modelProb": 0.51, "marketProb": 0.562, "edge": -0.052 }
      }
    },

    "pointByPoint": {
      "providerConvention": {
        "serving": { "1": "home", "2": "away" },
        "scoring": { "1": "home", "2": "away" },
        "breakRule": "serving != scoring"
      },
      "lastN": 50,
      "events": [
        {
          "ts": "2025-12-23T14:05:10.100Z",
          "set": 2,
          "game": 6,
          "point": "0-40",
          "serverSide": "away",
          "winnerSide": "home",
          "tags": ["BREAK_POINT", "DOUBLE_FAULT"]
        }
      ],
      "derived": {
        "breaks": {
          "homeBreaks": 1,
          "awayBreaks": 0,
          "lastBreakAt": "2025-12-23T14:02:12.500Z"
        }
      }
    },

    "stats": {
      "standard": {
        "home": {
          "firstServeInPct": 0.62,
          "firstServeWonPct": 0.74,
          "secondServeWonPct": 0.48,
          "aces": 5,
          "doubleFaults": 1,
          "breakPointsSaved": { "won": 2, "total": 4 }
        },
        "away": {
          "firstServeInPct": 0.58,
          "firstServeWonPct": 0.69,
          "secondServeWonPct": 0.52,
          "aces": 8,
          "doubleFaults": 3,
          "breakPointsSaved": { "won": 3, "total": 3 }
        }
      },
      "tradingOriented": {
        "holdDifficulty": {
          "home": "LOW",
          "away": "HIGH"
        },
        "pressurePointsWonPct": {
          "home": 0.55,
          "away": 0.31
        },
        "breakNextGameProb": {
          "home": 0.22,
          "away": 0.14
        },
        "clutchIndexLast10": {
          "home": 0.40,
          "away": -0.60
        },
        "serveDominance": {
          "home": 0.68,
          "away": 0.54
        }
      }
    },

    "momentum": {
      "series": {
        "source": "power_rankings",
        "fallbackUsed": false,
        "points": [
          { "ts": "2025-12-23T14:04:10.000Z", "value": 12 },
          { "ts": "2025-12-23T14:04:40.000Z", "value": 18 }
        ],
        "normalizedRange": [-100, 100]
      },
      "analysis": {
        "owner": "home",
        "shiftDetected": true,
        "shiftAt": "2025-12-23T14:03:50.000Z",
        "notes": "Owner cambia dopo run 4/5 + DF avversario"
      }
    },

    "predictor": {
      "winProbability": { "home": 0.49, "away": 0.51, "confidence": "MED" },
      "breakNextGameProbability": { "home": 0.22, "away": 0.14 },
      "drivers": [
        { "name": "returnPointsTrend", "impact": "POSITIVE", "side": "home" },
        { "name": "pressureIndexServer", "impact": "NEGATIVE", "side": "away" },
        { "name": "serveDominance", "impact": "POSITIVE", "side": "home" }
      ]
    },

    "journal": {
      "enabled": true,
      "summary": { "trades": 3, "profit": 12.4, "roiPct": 0.8 },
      "items": [
        {
          "id": "t_001",
          "ts": "2025-12-23T14:01:12.000Z",
          "strategyId": "banca_servizio",
          "action": "LAY",
          "targetPlayerId": "p_002",
          "stake": 10,
          "liability": 28,
          "entryOdds": 1.80,
          "exitOdds": 1.62,
          "result": "WIN",
          "pnl": 6.2,
          "notes": "Auto-log CTA click"
        }
      ]
    }
  },

  "dataQuality": {
    "completeness": {
      "overview": 1.0,
      "strategies": 0.95,
      "odds": 0.9,
      "pointByPoint": 0.85,
      "stats": 0.9,
      "momentum": 0.8,
      "predictor": 0.75,
      "journal": 1.0
    },
    "missing": [
      { "field": "tabs.momentum.series.points", "severity": "WARN", "note": "fallback svg disponibile se necessario" }
    ]
  },

  "cache": {
    "ttlSec": 10,
    "etag": "W/\"a1b2c3d4\"",
    "nextRefreshRecommendedSec": 5
  }
}
